<!--
    Street Cloud Simple
    Callum Prentice - callum@gmail.com

    Pulls in code fragments from these great people:
        https://github.com/spite/GSVPano.js/
        https://github.com/proog128/GSVPanoDepth.js/tree/master

    Base app autogenerated from templates
      ./template.threejs/
      ./template.generic/
-->
<!doctype html>
<html lang="en">
<head>
<title>Street Cloud Simple</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link href="https://fonts.googleapis.com/css2?family=Baloo+Tamma+2:wght@500&display=swap" rel="stylesheet">
<link rel="icon" type="image/x-icon" href="img/favicon.ico" />
<script type="text/javascript" src="js/app.js"></script>
<script type="text/javascript" src="js/three.min.js"></script>
<script type="text/javascript" src="js/OrbitControls.js"></script>
<script type="text/javascript" src="js/pako_inflate.min.js"></script>
<script type="text/javascript" src="https://maps.google.com/maps/api/js"></script>
</head>
<body onload="app()">
    <div id="loading_overlay">
        <img src="img/loading.svg"/>
    </div>
    <div id="webgl" ondrop="drop(event)" ondragover="allow_drop(event)" ondragenter="enter(event)" ondragleave="leave(event)">
        <div id="text_overlay"><p id="text_overlay_text">&nbsp;Copyright Google 2020</div>
    </div>
    <div id="settings">
        <table border="0" width=100% height="100%">
            <tr>
                <td valign="top" width="200px"><a href="#" class="curve_button" onclick="random_pano()">Random</a></td>
                <td valign="top" rowspan="3">
This experiment is an update to earlier ones (Street Cloud Interactive and Street Cloud Flow) after they stopped working because of extensive changes to the Google Maps Street View API. Sadly, it's all a bit of a lost cause since Google now insists on an paid API key for any map related features (the reason there isn't a map in this version) - it was still fun making this but I imagine it will be the last version. Use the mouse + left button to look around, mouse + right button to move and the mouse wheel to zoom in and out.
<p>
There are still a few things that aren't quite right - not having an official API means you have to guess a lot. Details are in the code but the most prominent one is the rotation of the heading arrow targets that move to the next pano. It's incorrect in a number of places and after having tried a number of different things, I am declaring defeat - let me know if you have figured it out already.
<p>
You can explore different locations by entering the lat/long as part of the URL, clicking on the Random / My location buttons or clicking on the arrows in each scene to move. You can also try dragging a Google Maps Street View URL from a different browser onto the main window - this doesn't always work since the regex to extract the location from isn't perfect. Finally, you can click on the Street View button to open the "real" Street View. I considered adding a selection map from a different provider like Leaflet but I don't think that's allowed by Google's terms of service.
<p>
You can hide this panel by clicking the gear icon top right or by appending <code>&cs=1</code> to the URL.
<p>
I am very grateful to the authors who generously shared their code <a target="_new" href="https://github.com/spite/GSVPano.js/">here</a> and <a target="_new" href="https://github.com/proog128/GSVPanoDepth.js/tree/master">here</a> and made it far easier for me to make this. Comments, feedback and of course fixes for my doubtless many mistakes are very welcome - contact details are &nbsp;<a target="_new" href="https://callumprentice.github.io/#contact">here</a>
                </td>
            </tr>
            <tr>
                <td valign="top" ><a href="#" class="curve_button" onclick="load_pano_my_location()">My location</a></td>
            </tr>
            <tr>
                <td valign="top" ><a href="#" class="curve_button" onclick="view_streetview()">Street View</a></td>
            </tr>
        </table>
    </div>
    <div id="toggle_settings_btn">
        <a href="#" onclick="toggle_settings()">
            <img id="toggle_settings_btn_img" src="img/toggle_settings.svg">
        </a>
    </div>
</body>
</html>